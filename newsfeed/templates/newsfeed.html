{%extends "base.html"%}


{%block content%}


<div class="container" id="posts">
    <div class="row">
        <div class="col-md-9 col-md-offset-1">


            {%for activity_dict in activity_dicts%}

            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="pull-right">{{activity_dict.activity.timestamp}}</div>
                    <div>
                        <a href="{%url 'blog' activity_dict.activity.object.blog.slug%}">
                            {{activity_dict.activity.object.blog.slug}}
                        </a>
                        {%if activity_dict.activity.activity_type == 0 %}
                        posted:
                        {%elif activity_dict.activity.activity_type == 1 %}
                        reblogged:
                        {%endif%}
                    </div>
                </div>
                <div class="panel-body">
                    <blockquote>
                        <h3>{{activity_dict.activity.object.title}}</h3>
                        <hr>
                        <p>{{activity_dict.activity.object.content|safe}}</p>
                    </blockquote>

                    <div class="tumblr-tags">
                        <span class="glyphicon glyphicon-tags"></span>

                        {%for tag_object in activity_dict.tags%}
                        <a href="{%url 'tagged' tag_object.tag%}" class="label label-default">{{tag_object.tag}}</a>
                        {%endfor%}

                    </div>

                </div>
                <div class="panel-footer">




                    <div class="pull-right inline">
                        <span  role="button" class="badge notes-badge">{{activity_dict.reblogs.count|add:activity_dict.likes.count}}</span>
                        <div class="btn-group" role="group" aria-label="...">

                            {%if activity_dict.is_liked%}
                            <a role="button" class="btn btn-default" href="{%url 'unlike' activity_dict.activity.object.pk%}"><span class="glyphicon glyphicon-heart"></span></a>
                            {%else%}
                            <a role="button" class="btn btn-default" href="{%url 'like' activity_dict.activity.object.pk%}"><span class="glyphicon glyphicon-heart-empty"></span></a>
                            {%endif%}
                            <a role="button" class="btn btn-default" href="{%url 'reblog' activity_dict.activity.object.pk%}">Reblog</a>
                        </div>
                    </div>

                    <div>
                        <div>
                            <p>Source:
                                <a href="{%url 'blog' activity_dict.activity.object.root.blog.slug%}">
                                    {{activity_dict.activity.object.root.blog.slug}}
                                </a>
                            </p>

                        </div>
                    </div>




                </div>


                <div class="notes" hidden="true" style="overflow:auto;" >
                    <br>
                    <ul class="list-group pull-right" style="margin-right:10px; width: 48%;">
                        <li class="list-group-item list-group-item-warning">Likes</li>
                        {%for like in activity_dict.likes%}
                        <a href = "{%url 'blog' like.liker.slug%}">
                            <li class="list-group-item">Liked by {{like.liker.slug}}.</li>
                        </a>
                        {%endfor%}
                    </ul>
                    <ul class="list-group" style="margin-left:10px; width: 48%;">
                        <li class="list-group-item list-group-item-warning">Reblogs</li>
                        {%for reblog in activity_dict.reblogs%}
                        <a href = "{%url 'blog' reblog.blog.slug%}">
                            <li class="list-group-item">Reposted by {{reblog.blog.slug}}.</li>
                        </a>
                        {%endfor%}
                    </ul>

                </div>

            </div>





            {%endfor%}







        </div>
    </div>
</div>


{% endblock %}

{%block javascript%}
        $(".notes-badge").on("click", function(){
            $(this).parent().parent().next(".notes").slideToggle(500);

        });
{%endblock%}